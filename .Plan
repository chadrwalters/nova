# AGENT MODE: Execute and Annotate Plan

Below is a Cursor-style plan with tasks, their statuses (TODO/DONE), and step-by-step details.  
All work is done on a dedicated feature branch, and each phase is validated upon completion.  

---

## Task 1: Switch to Feature Branch
• Description:  
  - Create and switch to a new Git feature branch (e.g., "feature/markdown_consolidate_phase").  
  - Ensure main is up to date before branching.  
• Dependencies: None  
• Status: TODO  

---

## Task 2: Outline the New "markdown_consolidate" Phase
• Description:  
  - Draft a Python module or script (e.g., "pipeline/markdown_consolidate.py") that runs after markdown_parse.  
  - Plan how each retrieved Markdown file merges with any matching attachments directory into a single file.  
• Dependencies:  
  - Task 1 complete (feature branch available)  
• Status: TODO  

---

## Task 3: Implement File/Attachments Merging Logic
• Description:  
  - For each .md file in the markdown_parse output, detect the attachments folder (if present).  
  - Inline each attachment's Markdown content between "[Begin Attachment]" and "[End Attachment]".  
  - Remove subdirectories in final output so only one cohesive .md file remains.  
• Dependencies:  
  - Task 2 complete (phase outline ready)  
• Status: TODO  

---

## Task 4: Validate Markdown Consolidation
• Description:  
  - Run script locally or in CI, ensuring that for each original .md, the final output merges attachments correctly.  
  - Confirm no subfolders remain and references are properly replaced.  
• Dependencies:  
  - Task 3 complete (implementation done)  
• Status: TODO  

---

## Task 5: Document the Changes
• Description:  
  - Update internal documentation or README to explain how "markdown_consolidate" works.  
  - Note the feature branch name and how to run or test the new phase.  
• Dependencies:  
  - Task 4 complete (validation done)  
• Status: TODO  

---

## Task 6: Create Pull Request
• Description:  
  - Push the feature branch to remote.  
  - Open a pull request into main.  
  - Request reviews and confirm final validation steps pass.  
• Dependencies:  
  - Task 5 complete (documentation ready)  
• Status: TODO  

---

## Progress
• Total Tasks: 6  
• Completed: 0  
• Remaining: 6  