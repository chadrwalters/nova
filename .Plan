# Step-by-Step Plan (Cursor AI Composer Mode)

**Step 1: Setup and Preparation**  
1.1. Create Backup Branch ✓ [DONE]
 • Task: Create branch named "refactor-backup" from the current state  
 • Action: Push the full current state to this backup branch  

1.2. Create Working Branch ✓ [DONE]
 • Task: Create branch named "refactor-processors" from main  
 • Action: Ensure the new branch is up to date with main before starting work  

---

**Step 2: Processor Consolidation** [IN PROGRESS]
2.1. Image Processor Migration [NEXT]
 • Compare "src/processors/image_processor.py" and "src/nova/processors/image.py"  
 • Merge or refactor code into a single file at "src/nova/processors/image_processor.py"  
 • Update all imports referencing the old file paths  
 • Remove or archive the old file once finished  

2.2. Markdown Processor Migration  
 • Review all markdown-related files, such as "src/nova/processors/components/markdown_handlers.py"  
 • Consolidate any overlapping code into a single, cohesive markdown processor under "src/nova/processors/markdown_processor.py"  
 • Update any outdated imports that refer to the old directories  

2.3. Other Processor Migration  
 • Identify any additional processors in the old "src/processors" directory  
 • Compare them to any counterparts in "src/nova/processors"  
 • Merge, update imports, and remove old or duplicate files  

---

**Step 3: Import Updates**  
3.1. Update Core Imports  
 • Review files such as "src/__init__.py" and "src/nova/core/paths.py"  
 • Update references to core modules if they still point to "src/core" instead of "src/nova/core"  

3.2. Global Import Verification  
 • Perform a global search for old import paths, like "src.processors" or "src.core"  
 • Update each to the new "src.nova.processors" or "src.nova.core" path  
 • Watch for potential circular dependencies or module not found errors  

---

**Step 4: Cleanup**  
4.1. Remove Old Structure  
 • After confirming all new imports work, remove the outdated "src/processors/" directory  
 • Remove any empty or unused directories  
 • Perform final checks to ensure no references remain to the removed files  

---

**Progress Tracking**  
• Total Tasks: 9 (subtasks included)  
• Current Progress: 2/9 tasks completed  
• Next Step: Step 2.1 (Image Processor Migration)  

---

Ready to proceed with Step 2.1 - Image Processor Migration. Would you like me to continue?